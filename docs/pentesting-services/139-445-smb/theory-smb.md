# Theory (SMB)

Server Message Block (SMB) is a network file sharing protocol that provides access to shared files and printers on a local network. Older versions of SMB are often vulnerable to major exploits such as EternalBlue.

### Versions

| SMB Version |                              Windows version                             |
| :---------: | :----------------------------------------------------------------------: |
|     CIFS    |                         Microsoft Windows NT 4.0                         |
|   SMB 1.0   | Windows 2000, Windows XP, Windows Server 2003 and Windows Server 2003 R2 |
|   SMB 2.0   |                    Windows Vista & Windows Server 2008                   |
|   SMB 2.1   |                   Windows 7 and Windows Server 2008 R2                   |
|   SMB 3.0   |                     Windows 8 and Windows Server 2012                    |
|  SMB 3.0.2  |                  Windows 8.1 and Windows Server 2012 R2                  |
|  SMB 3.1.1  |                    Windows 10 and Windows Server 2016                    |

### Default shares

In every Windows system with the SMB service, if we achieve authentication we can observe certain shared resources that always appear:

* `ADMIN$` - Administrative shares are hidden network shares created by the Windows NT family of operating systems that allow system administrators to have remote access to every disk volume on a network-connected system. These shares may not be permanently deleted but may be disabled.
* `C$` - Administrative share for the C:\ disk volume. This is where the operating system is hosted.
* `IPC$` - The inter-process communication share. Used for inter process communication via named pipes and is not part of the file system. With a null anonymous session you can access the **IPC$** share and interact with services exposed through named pipes. The `enum4linux` utility is particularly useful; with it you can obtain the following: Operating system information, the effective security policy of the system, details of available SMB shares, details of the parent domain, a list of local users and groups.
