# Domain Zone Transfer

## Introduction

Another interesting thing related to zone management is zone transfers. Zone transfers are used to replicate all the records from one DNS server to another DNS server, thus keeping both servers up to date. However, in some cases a DNS server is misconfigured and allows anyone to perform zone transfers.

In the case of Active Directory, DNS zone transfers are not required to replicate DNS records between DCs (which are usually the DNS servers). However, they can be enabled to allow other DNS servers to replicate DNS information.

Zone transfers can be configured on a per-zone and per-DC basis, which means that perhaps only one DC allows zone transfer while all other DCs reject zone transfer. In the case of a misconfigured DC, anyone could perform zone transfers, thus collecting all DNS information without the need for credentials.

## Practice

The following commands can be used to perform a DNS zone transfer:

```bash
# dig
dig axfr @<DNS_IP> # Try zone transfer without domain
dig axfr @<DNS_IP> <DOMAIN> # Try zone transfer guessing the domain
# host
host -t axfr <DOMAIN NAME> <DNS_IP>
# nmap
nmap --script=dns-zone-transfer -p 53 <DNS_IP>
# fierce
fierce --domain <DOMAIN> --dns-servers <DNS_IP> #Will try toperform a zone transfer against every authoritative name server and if this doesn'twork, will launch a dictionary attack
```
