# Theory (API Hacking)

An important aspect of back-end web application development is the use of web [APIs](https://en.wikipedia.org/wiki/API) and HTTP request parameters to connect the front-end and back-end in order to send data back and forth between the front-end and back-end components and perform various functions within the web application.

In order for the front-end component to interact with the back-end and request certain tasks to be performed, they use them to ask the back-end component for a specific task with a specific input. The back-end components process these requests, perform the necessary functions and return a certain response to the front-end components, which finally renders the end-user output on the client side.

## Query parameters

The default method for sending specific arguments to a web page is through the **GET** and **POST** request parameters. This allows front-end components to specify values for certain parameters used within the page for the back-end components to process and respond accordingly.

For example, a **/search.php** page would take an **item** parameter, which can be used to specify the search element. Passing a parameter through a **GET** request is done via the URL '**/search.php?item=apples**', while **POST** parameters are passed through the **POST** data at the bottom of the **HTTP POST** request:

```php
POST /search.php HTTP/1.1
...SNIP...

item=apples
```

Query parameters allow a single page to receive multiple types of input, each of which can be processed differently. For other scenarios, web APIs can be much faster and more efficient to use.

## Web APIs

An API (Application Programming Interface) is an interface within an application that specifies how the application can interact with other applications. In the case of web applications, it is what allows remote access to the functionality of back-end components. APIs are not unique to web applications and are used for software applications in general. Web APIs are typically accessed through the HTTP protocol and are usually managed and translated through web servers.

A weather web application, for example, may have a certain API to retrieve the current weather for a certain city. We can request the API URL and pass the city name or city id, and it would return the current weather in a **JSON** object. Another example is the Twitter API, which allows us to retrieve the latest Tweets from a given account in **XML** or **JSON** formats, and even allows us to send a Tweet 'if authenticated', etc.

To enable the use of APIs within a web application, developers have to develop this functionality in the back-end of the web application using API standards such as **SOAP** or **REST** (also GraphQL, which is entering the market).

## Types of APIs

![](../../../.gitbook/assets/types\_of\_apis.png)

### SOAP API

The **SOAP** [(Simple Objects Access)](https://en.wikipedia.org/wiki/SOAP) standard shares data via **XML**, where the request is made in **XML** via an HTTP request, and the response is also returned in **XML**. The front-end components are designed to parse this **XML** output appropriately.

The following is an example of a **SOAP** message:

```xml
<?xml version="1.0"?>

<soap:Envelope
xmlns:soap="http://www.example.com/soap/soap/"
soap:encodingStyle="http://www.w3.org/soap/soap-encoding">

<soap:Header>
</soap:Header>

<soap:Body>
  <soap:Fault>
  </soap:Fault>
</soap:Body>

</soap:Envelope>
```

**SOAP** is very useful for transferring structured data (i.e. a complete class object), or even binary data, and is often used with serialized objects, all of which allows complex data to be shared between front-end and back-end components and parsed appropriately. It is also very useful for sharing stateful objects - i.e., sharing/changing the current state of a web page - which is increasingly common in modern web applications and mobile apps.

However, **SOAP** can be difficult to use for beginners or require long and complicated requests even for smaller queries, such as basic **search** or **filter** queries. This is where the standard **REST** API is most useful.

To parse these files and create sample requests you can use the **SOAPUI** tool or the **WSDLer** Burp Suite Extension.

### REST API

The **REST** [(Representational State Transfer)](https://en.wikipedia.org/wiki/Representational\_state\_transfer) standard shares data via the URL path (i.e. `search/users/1`), and typically returns output in **JSON** format (i.e. **userid 1**).

Unlike query parameters, **REST** APIs typically focus on pages that expect a type of input passed directly through the URL path, without specifying its name or type. This is often useful for queries such as **search**, **sort** or **filter**. Therefore, **REST** APIs typically break down the functionality of the web application into smaller APIs and use these smaller API requests to allow the web application to perform more advanced actions, making the web application more modular and scalable.

Clients can cache responses, so a REST API response must explicitly state whether it can be cached or not.

Responses to **REST** API requests are typically in **JSON** format, and front-end components are developed to handle this response and render it appropriately. Other output formats for **REST** include **XML**, **x-www-form-urlencoded**, or even raw data.

As seen above in the **database** section, the following is an example of a **JSON** response to the **GET** **/category/posts/** API request:

```json
{
  "100001": {
    "date": "01-01-2021",
    "content": "Welcome to this web application."
  },
  "100002": {
    "date": "02-01-2021",
    "content": "This is the first post on this web app."
  },
  "100003": {
    "date": "02-01-2021",
    "content": "Reminder: Tomorrow is the ..."
  }
}
```

**REST** uses several HTTP methods to perform different actions in the web application:

* **GET** request to retrieve data
* **POST** request to create data
* **PUT** request to modify existing data
* **DELETE** request to delete data
